<!DOCTYPE html>
<html lang="en" style="height: 100%;">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>learnJS</title>
    <style>
        body {
            background-color: rgb(30, 30, 60);
            color: white;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }
    </style>
</head>

<body id="body" style="display: flex;  margin-top: 10px; padding: 0 40px;">
    <div style="padding-right: 100px;">
        <div id="itemsNumber" style="font-size: 55px;"></div>
        <div id="intervalNumber" style="font-size: 55px;"></div>
        <div>
            <p>Ordenar</p>
            <div style="display: flex;">
                <div id="ascending">
                    <button id="ascending" onclick="sortAscending()">Ascendente</button>
                </div>
                <div id="descending">
                    <button id="descending" onclick="sortDescending()">Descendente</button>
                </div>
            </div>
        </div>
    </div>
    <div style="display: flex; flex-direction: column; justify-content: space-between;">
        <div id="show-items"></div>
        <div id="divButton" style="padding-top: 20px;"></div>
    </div>

    <script>

        // CREATED
        const showItems = document.getElementById('show-items');
        const divButton = document.getElementById('divButton');
        const itemsNumber = document.getElementById('itemsNumber');
        const intervalNumber = document.getElementById('intervalNumber');

        let array = []; // Array to put items;
        let items = Math.floor(Math.random() * 100) + 1;
        let interval = Math.floor(Math.random() * 10) + 15;
        for (i = 0; i < items; i++) {
            array.push(`${(i * Math.floor(Math.random() * 10) + 1)}`); // Push in Array a random items
        }

        itemsNumber.innerHTML = `Items: ${items}`;
        intervalNumber.innerHTML = `Intervalo: ${interval}`;

        let startPoint = 0;
        let endPoint = interval;

        const pageSplit = Math.ceil(array.length / interval); // Split items in pages according interval
        let pageArray;
        let itemsPageArray;
        function splitPageArray() {
            // Refresh pageArray (COMPUTED)
            startPoint = 0;
            endPoint = interval;
            pageArray = []
            //
            for (let pageN = 1; pageN < pageSplit + 1; pageN++) {
                let pageBody = { pageNumber: pageN, items: [] };
                pageArray.push(pageBody);
                for (; startPoint < endPoint; startPoint++) {
                    if (startPoint == array.length) { break; }
                    pageBody.items.push(array[startPoint])
                }
                endPoint += interval;
            }
            // Refresh itemsPageArray (COMPUTED)
            itemsPageArray = pageArray[0].items;
            //
            createButtons();
        }
        splitPageArray();

        // METHODS
        function sortAscending() {
            array.sort(function (a, b) { return a - b });
            splitPageArray();
        }
        function sortDescending() {
            array.sort(function (a, b) { return b - a });
            splitPageArray();
        }

        let buttonsCreated = false;
        function createButtons() {
            divButton.innerHTML = '';
            for (let pageN = 1; pageN < pageSplit + 1; pageN++) {
                let selfButton = pageArray[pageN - 1].items; // Separate items according to that page (on click)

                let button;
                button = document.createElement('button'); // Creates and assign button according page,   
                button.innerHTML = pageArray[pageN - 1].pageNumber; // -1 to acces the index 0
                button.addEventListener('click', function () {
                    itemsPageArray = selfButton;
                    buttonAssigend = true;
                    renderItems();
                })
                divButton.appendChild(button);
                
                renderItems();
            }
        }

        function renderItems() {
            let itemsDiv = document.createElement('div');
            for (item in itemsPageArray) {
                let eachItem = document.createElement('div');
                eachItem.innerHTML = itemsPageArray[item];
                itemsDiv.appendChild(eachItem);
            }
            showItems.innerHTML = ''; // Resets showItems
            showItems.appendChild(itemsDiv);
        }

    </script>
</body>

</html>